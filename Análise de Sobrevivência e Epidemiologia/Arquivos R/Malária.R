install.packages('survival')

tempos<-c(7,8,8,8,8,12,12,17,18,22,30,30,30,30,30,30,8,8,9,10,10,14,15,15,18,19,21,22,22,23,25,8,8,8,8,8,8,9,10,10,10,11,17,19)
cens<-c(rep(1,10), rep(0,6), rep(1,15), rep(1,13))
grupo<-c(rep(1,16), rep(2,15), rep(3,13))
require(survival)
ekm<-survfit(Surv(tempos,cens)~grupo)
summary(ekm)
plot(ekm, lty=c(1,4,2), xlab="Tempo", ylab="S(t) estimada")
legend(1, 0.3, lty=c(1,4,2), c("Grupo 1","Grupo 2","Grupo 3"), lwd=1, bty="n", cex=0.8)
survdiff(Surv(tempos,cens)~grupo, rho=0)
survdiff(Surv(tempos[1:31],cens[1:31])~grupo[1:31], rho=0)
survdiff(Surv(tempos[17:44],cens[17:44])~grupo[17:44], rho=0)
survdiff(Surv(c(tempos[1:16],tempos[32:44]),c(cens[1:16],cens[32:44]))~c(grupo[1:16],grupo[32:44]), rho=0)
